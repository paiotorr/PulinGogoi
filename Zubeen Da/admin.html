<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Joi Zubeen Da — Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Arial,Helvetica,sans-serif;background:#f3f3f3;color:#111}
header{background:#000;color:#fff;padding:16px;text-align:center}
header h1{font-size:20px}
header p{font-size:12px;opacity:.8}
.container{max-width:1100px;margin:20px auto 40px;padding:0 12px}
.card{background:#fff;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.08);margin-bottom:20px;overflow:hidden}
.card-header{padding:14px 16px;font-weight:700;cursor:pointer;display:flex;justify-content:space-between;align-items:center;background:#111;color:#fff}
.card-header span{font-size:12px;opacity:.7}
.card-body{display:none;padding:16px}
.category-list{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:14px}
.category-item{background:#f0f0f0;padding:6px 12px;border-radius:20px;font-size:12px;display:flex;align-items:center;gap:8px}
.category-item button{background:#000;color:#fff;border:none;border-radius:50%;width:18px;height:18px;font-size:11px;cursor:pointer}
.add-category{display:flex;gap:10px;margin-top:10px}
.add-category input{flex:1;padding:8px 10px;font-size:13px;border:1px solid #ccc;border-radius:6px}
.add-category button{padding:8px 14px;font-size:13px;background:#000;color:#fff;border:none;border-radius:6px;cursor:pointer}
.table-wrapper{overflow:auto}
table{width:100%;border-collapse:collapse;min-width:900px}
thead{background:#111;color:#fff}
th,td{padding:12px 10px;font-size:13px;border-bottom:1px solid #eee}
tbody tr:hover{background:#fafafa}
.thumb{width:110px;height:62px;border-radius:6px;overflow:hidden;background:#ddd}
.thumb img{width:100%;height:100%;object-fit:cover}
footer{text-align:center;font-size:12px;color:#666;margin-top:20px}
.team-form{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
.team-form input{padding:8px 10px;font-size:13px;border:1px solid #ccc;border-radius:6px}
.team-form .flex-1{flex:1 1 220px}
.team-form button{padding:8px 14px;font-size:13px;background:#000;color:#fff;border:none;border-radius:6px;cursor:pointer}
.manage-list{margin-top:12px;max-height:260px;overflow:auto;border:1px solid #f0f0f0;border-radius:6px}
.small-muted{font-size:12px;color:#666;margin-top:8px}
</style>
</head>

<body>

<header>
  <h1>Admin / Owner Dashboard</h1>
  <p>Joi Zubeen Da — Control Panel</p>
</header>

<main class="container">

  <!-- CATEGORY -->
  <div class="card">
    <div class="card-header" onclick="toggleBox('categoryBox','catIcon')">
      Manage Categories <span id="catIcon">▼</span>
    </div>
    <div class="card-body" id="categoryBox">
      <div class="category-list" id="categoryList"></div>
      <div class="add-category">
        <input type="text" id="newCategory" placeholder="New category name">
        <button onclick="addCategory()">Add</button>
      </div>
    </div>
  </div>

  <!-- VIDEO LOG -->
  <div class="card">
    <div class="card-header">Video Activity Log</div>
    <div class="card-body" style="display:block">
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Thumbnail</th>
              <th>Title</th>
              <th>Category</th>
              <th>Added By</th>
              <th>URL</th>
              <th>Date & Time</th>
            </tr>
          </thead>
          <tbody id="videoLog"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- TEAM -->
  <div class="card">
    <div class="card-header" onclick="toggleBox('teamBox','teamIcon')">
      Manage Team Members <span id="teamIcon">▼</span>
    </div>
    <div class="card-body" id="teamBox">
      <div class="team-form">
        <input id="tmName" class="flex-1" placeholder="Full name">
        <input id="tmEmail" class="flex-1" placeholder="Email">
        <input id="tmPass" placeholder="Password">
        <button onclick="addTeam()">Add Member</button>
      </div>
      <div class="manage-list">
        <table>
          <thead>
            <tr><th>#</th><th>Name</th><th>Email</th><th>Added On</th><th>Action</th></tr>
          </thead>
          <tbody id="teamList"></tbody>
        </table>
      </div>
    </div>
  </div>

</main>

<footer>© 2026 Joi Zubeen Da — Owner Access</footer>

<script>
/* ---------- OWNER GUARD ---------- */
const session = JSON.parse(sessionStorage.getItem("jzd_session") || "null");
if(!session || session.role !== "owner"){
  location.replace("login.html");
}

/* ---------- STORAGE HELPERS ---------- */
const CKEY="jzd_categories", VKEY="jzd_videos", TKEY="jzd_team";
const get=(k,d)=>JSON.parse(localStorage.getItem(k)||JSON.stringify(d));
const set=(k,v)=>localStorage.setItem(k,JSON.stringify(v));

/* ---------- TOGGLE ---------- */
function toggleBox(id,icon){
  const box=document.getElementById(id);
  const ic=document.getElementById(icon);
  const open=box.style.display==="block";
  box.style.display=open?"none":"block";
  ic.textContent=open?"▼":"▲";
}

/* ---------- CATEGORIES ---------- */
function renderCategories(){
  const list=document.getElementById("categoryList");
  const cats=get(CKEY,["podcast","interview","song"]);
  list.innerHTML="";
  cats.forEach((c,i)=>{
    list.innerHTML+=`<div class="category-item">${c}<button onclick="removeCategory(${i})">×</button></div>`;
  });
}
function addCategory(){
  const input=document.getElementById("newCategory");
  const v=input.value.trim().toLowerCase();
  if(!v) return;
  const cats=get(CKEY,[]);
  if(cats.includes(v)) return;
  cats.push(v); set(CKEY,cats);
  input.value=""; renderCategories();
}
function removeCategory(i){
  const cats=get(CKEY,[]);
  cats.splice(i,1); set(CKEY,cats); renderCategories();
}

/* ---------- VIDEO LOG ---------- */
function renderVideos(){
  const tbody=document.getElementById("videoLog");
  const vids=get(VKEY,[]);
  tbody.innerHTML="";
  vids.forEach((v,i)=>{
    tbody.innerHTML+=`
    <tr>
      <td>${i+1}</td>
      <td><div class="thumb"><img src="${v.thumb}"></div></td>
      <td>${v.title}</td>
      <td>${v.category}</td>
      <td>${v.addedBy}</td>
      <td><a href="${v.url}" target="_blank">Open</a></td>
      <td>${v.time}</td>
    </tr>`;
  });
}

/* ---------- TEAM ---------- */
function renderTeam(){
  const list=document.getElementById("teamList");
  const team=get(TKEY,[]);
  list.innerHTML="";
  team.forEach((m,i)=>{
    list.innerHTML+=`
    <tr>
      <td>${i+1}</td>
      <td>${m.name}</td>
      <td>${m.email}</td>
      <td>${m.addedOn}</td>
      <td><button onclick="removeTeam(${i})">Remove</button></td>
    </tr>`;
  });
}
function addTeam(){
  const n=tmName.value.trim(), e=tmEmail.value.trim(), p=tmPass.value;
  if(!n||!e||!p) return alert("Fill all fields");
  const team=get(TKEY,[]);
  if(team.some(t=>t.email===e)) return alert("Already exists");
  team.push({name:n,email:e,password:p,addedOn:new Date().toLocaleString()});
  set(TKEY,team);
  tmName.value=tmEmail.value=tmPass.value="";
  renderTeam();
}
function removeTeam(i){
  const team=get(TKEY,[]);
  team.splice(i,1); set(TKEY,team); renderTeam();
}

/* ---------- INIT ---------- */
renderCategories();
renderVideos();
renderTeam();
</script>

</body>
</html>
